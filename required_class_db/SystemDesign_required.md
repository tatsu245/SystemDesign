# 要求仕様書
## サーベイ論文管理システム
更新日2018年6月1日
2018年度情報システム設計

## メンバー
E16-5413 古田龍将

## 1. 用語定義
本稿で使用する用語の定義を次の表に示す。

| 用語 | 説明 |
|-----|------|
|利用者|利用者登録をすることでID、パスワードが登録されており、その登録されているID、パスワードによってログインした者|

## 2. 開発目的・現行の問題点
### 1.1 目的
ある選手の卓球の大会での試合戦績を管理すること。
### 1.2 問題点
卓球の大会に出場した後，試合戦績の管理が難しいこと。
### 1.3 解決方法の概要
大会の登録，選手の登録，試合結果を入力，管理できるシステムを構築する。
## 3. アクター
利用者、管理者は以下の通りとする。

< 利用者 >
- 利用者登録によって、ID、パスワードが登録されている者
- 大会を登録できること。大会情報として大会名、期間、開催場所は登録できること
- 選手を登録できること
- 選手が出場した大会を登録できること
- 対戦結果(対戦日、ゲームカウント、どの位置で対戦したか(例：準決勝))を登録できること
- 大会と対戦相手を指定すると、試合結果を表示できること(大会はトーナメント方式とする)


## 4. 機能要求

### 4.1 利用者の機能

####  ログイン

|ID|項目|内容|
|---|---|---|
|r-4.1.1|理由 |許可された利用者のみ、システムの機能を使用することができるようにするため。|
|     |説明 |利用者は利用者登録後にログインを行うことができる。利用者、管理者はIDとパスワードを入力し、認証を受けることでシステムに接続される。利用者はシステムの機能のうち利用者の機能を、管理者はシステムの機能のうち利用者の機能、及び管理者の機能を使用することができる。|

#### ログアウト
|ID   |項目 |内容|
|-----|-----|-----|
|r-4.1.2 |理由 |利用者のコンピュータを用いる、もしくはXSSやネットワークの盗聴によって、他者が、利用者の保持しているセッションに、再接続し、セッションを乗っ取ることを防ぐため。|
|     |説明 |システムへの接続を終了する。|

#### 通知
|ID|項目|内容|
|---|---|---|
|r-4.1.3|理由 |利用者がコメントに気が付かずに、議論が行われなくなってしまうこと、利用者がアップロードした論文、投稿したレビュー、コメントを何らかの理由によって、管理者に削除されたことに気が付かないことの2つが起こる可能性を無くすため。|
|     |説明 |利用者がアップロードした論文、投稿したレビューに他の利用者からコメントが来た際、管理者によって論文、レビュー、コメントの削除が行われた際に通知がされる。|

#### フォルダの作成
|ID|項目|内容|
|---|---|---|
|r-4.1.4|理由 |フォルダーを作成することによって、利用者がアップロードした論文を管理しやすくするため。|
|     |説明 |利用者はアップロードされた論文を管理するためのフォルダーを新規作成することができる。作成時にはフォルダーの名前を入力する。その際、条件として、フォルダー名は全角、半角200字以内とする。|

#### サーベイした論文のアップロード
|ID|項目|内容|
|---|---|---|
|r-4.1.5|理由 |利用者がサーベイした論文の管理、共有をするため。|
|     |説明 |利用者は論文のアップロードをすることができる。アップロードするファイルを選択し、その論文に関する4つの項目を入力する。内容、入力の際の条件は以下に示す。1.論文名 2.主な著者名(複数名可) 3.論文発表日 4.カテゴリーの選択 論文名は全角、半角200字以内とする。条件は、1. ファイル形式はpdf・word・markdownのどれかである。 2. 1つのファイルサイズの大きさは、10MBまでとする。上記の条件をすべて満たせば、アップロードを開始する。|

#### 論文のダウンロード
|ID|項目|内容|
|---|---|---|
|r-4.1.6|理由 |利用者が、アップロードされた論文を個人のコンピュータに保存し、読むことができるようにするため。|
|     |説明 |アップロードされた論文を選択し、ダウンロードすることができる。|

#### 論文の閲覧
|ID|項目|内容|
|---|---|---|
|r-4.1.7|理由 |システム内で利用者同士がアップロードした論文を共有できるようにするため。|
|     |説明 |アップロードされた論文を、論文一覧画面で閲覧することができる。デフォルトの状態では、アップロードされた時刻の昇順で論文は並べられている。以下この状態をデフォルトの状態とする。|

#### 論文一覧画面における論文の並べ替え
|ID|項目|内容|
|---|---|---|
|r-4.1.8|理由 |利用者が論文一覧画面で、アップロードされた日時以外の条件で表示することを可能にするため。|
|     |説明 |デフォルトの状態から、その他の条件で並べ替えて論文を探したい場合、以下の条件で並べ替えができる。1.アップロード日時の昇順・降順 2.学籍番号の昇順・降順|

#### アップロードされた論文のカテゴリー検索
|ID|項目|内容|
|---|---|---|
|r-4.1.9|理由 |利用者にとって興味関心のある論文を検索することを容易にするため。|
|     |説明 |予めアップロードする際に、論文にはカテゴリー分けがされている。利用者はカテゴリーを選択し、該当する論文のみを検索することができる。また、その該当した論文はデフォルトの状態で並べられており、r-4.1.8の並べ替え機能を用いることもできる。|

#### レビューの投稿
|ID|項目|内容|
|---|---|---|
|r-4.1.10|理由 |利用者がサーベイした論文を読み終えた後、その内容や感想をレビューとして登録することによって、利用者の論文に対する理解を深めること、他の利用者の興味関心を引き立てることができるようにするため。|
|     |説明 |利用者はアップロードされたの中から、任意で1つ論文を選択し、その論文に関してのレビューを登録することができる。登録の際には、以下の条件を満たした場合のみ、レビューの投稿、レビューとしてファイルをアップロードすることができる。条件1.レビュー登録画面にてレビューを登録する際には全角、半角400文字以内とする。また、markdownに対応している。条件2.ファイルをアップロードする際にはファイルの形式はpdf、word、markdownのどれかである。また1つのファイルサイズの大きさは、10MBまでとする。|

#### レビューの閲覧
|ID|項目|内容|
|---|---|---|
|r-4.1.11|理由 |レビューの閲覧をすることができるようにすることで、他の利用者の興味関心を引き立て、議論の場を設けることができるようにするため。|
|     |説明 |利用者はアップロードされた論文の中から、任意で1つ論文を選択し、レビューの閲覧をすることができる。またr-4.1.22の通知閲覧機能より閲覧することも可能である。|

#### 論文、レビューへのコメント機能
|ID|項目|内容|
|---|---|---|
|r-4.1.12|理由 |利用者がシステム内でその論文やレビューに対する議論を行うことのできる場を設けるため。|
|     |説明 |利用者はアップロードされた論文の中から、任意で1つ論文を選択し、コメント欄から、アップロードされた論文、投稿されたレビューに対して、400字以内でコメントをすることができる。また、markdownに対応している。|

#### コメントの閲覧機能
|ID|項目|内容|
|---|---|---|
|r-4.1.13|理由|アップロードされた論文、レビューへつけられたコメントを確認することができるようにするため。|
||説明|利用者はアップロードされた論文の中から、任意で1つ論文を選択し、投稿されたコメントを閲覧することができる。またr-4.1.22の通知閲覧機能より閲覧することも可能である。|

#### フォルダー名の編集
|ID|項目|内容|
|---|---|---|
|r-4.1.14|理由|論文管理をする際にフォルダー名の変更をできるようにするため。|
||説明|利用者は論文一覧画面で利用者本人が作成したフォルダー名をクリックし、フォルダー名の変更操作をすることができる。この際、r-4.1.4定められたフォルダー名の条件を満たすフォルダー名にのみ変更が可能である。|

#### アップロードした論文情報の編集
|ID|項目|内容|
|---|---|---|
|r-4.1.15|理由|論文情報が間違っていた際、修正を加えられるようにするため。|
||説明|利用者は、本人がアップロードした論文の中から、任意で1つ論文を選択し、論文情報の編集を行うことができる。論文のアップロードの際に入力した4つの項目に関してのみ変更することができ、その際r-4.1.5の条件に合った項目の内容にのみ変更可能である。|

#### アップロードした論文の削除
|ID|項目|内容|
|---|---|---|
|r-4.1.16|理由|アップロードした論文をシステムから削除できるようにするため。|
||説明|利用者はアップロード済みの論文の削除ができる。本人がアップロードした論文の中から、任意で1つ論文を選択し、論文を削除することができる。|

#### レビューの削除
|ID|項目|内容|
|---|---|---|
|r-4.1.17|理由|論文に関するレビューをシステム上から削除できるようにするため。|
||説明|利用者は投稿済みのレビューの削除ができる。レビュー閲覧画面より任意でレビューを選択し、削除することができる。|

#### コメントの削除
|ID|項目|内容|
|---|---|---|
|r-4.1.18|理由|論文、レビューに関するコメントをシステム上から削除できるようにするため。|
||説明|利用者は投稿済みのコメントの削除ができる。コメント閲覧画面より任意でコメントを選択し、削除することができる。|

#### 利用者登録
|ID|項目|内容|
|---|---|---|
|r-4.1.19|理由|利用者登録を行い、認証した者のみがシステムを使えるという制限を設けるため。|
||説明|初めに利用者登録を行う。学年、氏名、学芸大学のメールアドレス、学籍番号、ID、パスワードを入力し、認証されることによって登録とする。|

#### フォルダーの削除
|ID|項目|内容|
|---|---|---|
|r-4.1.20|理由|作成したフォルダーが不要になった際、削除をできるようにするため。|
||説明|利用者は本人が作成したフォルダーのみ削除を行うことができる。論文一覧に表示されているフォルダーの中から任意で選択し、フォルダーの削除を行うことができる。その際フォルダー内の論文全てにもr-4.1.16の論文削除機能が働く。|

#### アカウントの削除
|ID|項目|内容|
|---|---|---|
|r-4.1.21|理由|不要になったアカウントを削除することができるようにするため。|
||説明|利用者はアカウントの削除を行うことができる。その際、システム内の登録情報をすべて削除する。また、r-4.1.16、r-4.1.17、r-4.1.18、r-4.1.20の削除機能も働く。|

#### 通知の閲覧
|ID|項目|内容|
|---|---|---|
|r-4.1.22|理由|r-4.1.3の通知が届いた際にその内容を確認できるようにするため。|
||説明|利用者は通知を受けた際に、通知一覧からその通知の内容を確認することができる。|

#### アップロードされた論文の論文名での検索機能
|ID|項目|内容|
|---|---|---|
|r-4.1.23|理由|利用者が論文検索をより容易に、迅速に行えるようにするため。|
||説明|利用者は，論文名でシステムにアップロードされた論文を検索することができる．|


### 4.2 管理者の機能

#### 論文の削除
|ID|項目|内容|
|---|---|---|
|r-4.2.1|理由|管理者が不当であると判断した論文に対しての削除をできるようにするため。|
||説明|管理者は本人がアップロードした論文のみでなく、全利用者がアップロードした論文を任意で選択し、削除することができる。|

#### レビューの削除
|ID|項目|内容|
|---|---|---|
|r-4.2.2|理由|管理者が不当であると判断したレビューに対しての削除をできるようにするため。|
||説明|管理者は本人が投稿したレビューのみでなく、全利用者が投稿したレビューを任意で選択し、削除することができる。|

#### コメントの削除
|ID|項目|内容|
|---|---|---|
|r-4.2.3|理由|管理者が不当であると判断したコメントに対しての削除をできるようにするため。|
||説明|管理者は本人が投稿したコメントのみでなく、全利用者が投稿したコメントを任意で選択し、削除することができる。|

#### フォルダーの削除
|ID|項目|内容|
|---|---|---|
|r-4.2.4|理由|管理者が不当であると判断したフォルダーに対しての削除をできるようにするため。|
||説明|管理者は本人が作成したフォルダーのみでなく、全利用者が作成したフォルダーを任意で選択し、削除することができる。|

#### アカウントの削除
|ID|項目|内容|
|---|---|---|
|r-4.2.5|理由|管理者が不当であると判断したアカウントに対しての削除をできるようにするため。|
||説明|管理者は本人が作成したアカウントのみでなく、全利用者が作成したアカウントを任意で選択し、削除することができる。|

#### カテゴリーの設定
|ID|項目|内容|
|---|---|---|
|r-4.2.6|理由|r-4.1.5、r-4.1.9でのカテゴリーに関して利用者が選択できるようにするため。|
||説明|管理者は論文のアップロードの際に登録するカテゴリーを作成することができる。利用者は管理者によって作成されたカテゴリーの中から選択する。|

## 5. 非機能要求
### 5.1 セキュリティ対策

#### XSS対策
|ID   |項目 |内容|
|-----|-----|-----|
|r-5.1.1|理由 |攻撃者によって利用者が偽ページに誘導され、個人情報等を抜き取られないようにするため。|
|     |説明 |開発時には脆弱性を作りこまないように、IPAの安全なwebサイトの作り方を参照し、セキュリティ実装の状況を随時確認する。運用時は定期的にセキュリティ監査を行う。|

#### ロールベースアクセス制御
|ID|項目|内容|
|---|---|---|
|r-5.1.2|理由 |認められたユーザのシステムアクセスを制御するため。|
|     |説明 |「利用者」には利用者の機能を使用する権限を、「管理者」には利用者の機能及び管理者の機能を使用する権限を与える。この権限をもとに、ユーザ情報に格納していく。このとき、権限を追加しやすくするためにロール値に余裕を持たせて設計する。|

#### url直打ちでのJSPファイルへのアクセス禁止
|ID|項目|内容|
|---|---|---|
|r-5.1.3|理由 |利用者以外の者が本来アクセスすることのできないページにアクセスすることを防ぐため。|
|     |説明 |利用者以外の者が本来アクセスすることができないページにurl直打ちでアクセスしようとした際には、そのurlを保持し、アクセスするための認証画面へ遷移させる。認証が完了すれば保持しているurlを返す。|

#### タイムアウト時間の設定
|ID|項目|内容|
|---|---|---|
|r-5.1.4|理由|タイムアウトする前に他者が保持されているセッションに、利用者のコンピュータを用いる、もしくはXSSやネットワークの盗聴によって、再接続され、セッションを乗っ取られることを防ぐため。|
||説明|セッションの保持時間は30分に設定する。|
